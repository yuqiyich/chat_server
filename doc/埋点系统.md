## 埋点系统
 * 提供一套简单的埋点记录上传查看机制，用于客户端统计客户端模块想要记录的数据。目前主要用于【推荐点降级生效记录】等功能。
### 通用基础介绍
1、目前项目部署环境仅一套，部署的服务器为公司项目测试环境的服务器，作为该项目唯一的一套环境（prod）。

2、服务器域名为 [https://weixintest.ruqimobility.com](https://weixintest.ruqimobility.com) ，管理后台地址 [https://weixintest.ruqimobility.com/manager/login.html](https://weixintest.ruqimobility.com/manager/login.html)，
登录账号：admin，密码：ruqi123456。

3、API接口（暂未做数据加解密处理，目前提供给APP端使用的接口也不校验token）

> HOST：https://weixintest.ruqimobility.com/  
> PATH：manager/  
> UrlSuffix：  
> * record/uploadDotEventData （通用简单埋点事件统计上报）

4、Swagger地址（可在线简单测试接口，暂未详细标示字段注释、必填属性等）： [https://weixintest.ruqimobility.com/manager/swagger-ui.html](https://weixintest.ruqimobility.com/manager/swagger-ui.html)

5、目前的APPKEY，同一个应用仅区分两个环境：dev、prod。对应客户端的开发、测试环境使用开发环境的key，正式环境使用正式环境的key。目前APPKEY值保存在数据库中。

### 详细介绍
1、接口详细说明
* POST请求
* 上报接口URL完整路径：https://weixintest.ruqimobility.com/manager/record/uploadDotEventData
* 参数示例：
```
{
  "appInfo": {
    "appKey": "" // 必填。环境不同或应用不同则appKey不同
  },
  "content": {
    "appVersionCode": 0,
    "appVersionName": "string",
    "channel": "string", // 渠道
    "deviceBrand": "string", // 设备品牌
    "deviceId": "string", // 设备ID
    "deviceModel": "string", // 设备型号
    "eventDetail": "", // 事件详情
    "eventKey": "", // 必填。事件KEY
    "ext": "string", // 后续扩展字段
    "locationLat": 0, // 事件触发时的纬度
    "locationLng": 0, // 事件触发时的经度
    "netState": "string", // 网络类型，如WIFI、4G等
    "platform": "iOS", // 必填。系统平台，如Android、iOS
    "systemVersion": "string", // 系统版本，如9.0
    "userId": 0 // 用户ID
  },
  "recordType": 1001 // 必填。记录类型，通用埋点上报固定传1001
}
```
* 返回值目前仅返回`OK`。未按照标准接口返回请求结果。业务侧异步调用接口上报数据后也不需关注接口请求结果。

2、报表查看
* **推荐点降级生效记录**
1. 入口路径：登录管理后台，左侧菜单栏【数据埋点系统】->【推荐点降级生效记录】。
2. 筛选条件：应用类型（乘客/乘客dev）、系统平台（Android/iOS）、生效类型（腾讯推荐点生效/腾讯GEO点生效/如祺缓存解析点生效）、app版本、设备型号、设备品牌、用户ID、设备ID、时间段。
3. 数据查看：生效类型、应用名称、系统平台、用户ID、设备ID、详情、上报时间、系统版本、网络状态、经度、纬度、渠道、版本ID、版本名称、设备型号、设备品牌、IP、备注。
