## 祺点接口文档
 * 如祺出行自建推荐上车点能力。通过第三方数据采集、自建算法数据采集、定期清洗和整理数据，构建出如棋出行的推荐上车点数据库，为推荐上车点场景提供数据支撑能力和良好乘客体验。

### 迭代说明

V1.0.0
 * 自建上车点采集上报接口
 * 自建推荐上车点查看接口

### 通用基础介绍
1、目前项目部署环境仅一套，部署的服务器为公司项目测试环境的服务器，作为该项目唯一的一套环境（prod）。

2、管理后台地址 [https://weixintest.ruqimobility.com/manager/login.html](https://weixintest.ruqimobility.com/manager/login.html)，
登录账号：admin，密码：ruqi123456。

3、API接口（暂未做数据加解密处理，目前提供给APP端使用的接口也不校验token）
> HOST：https://weixintest.ruqimobility.com/  
> PATH：manager/  
> UrlSuffix：
> * point/uploadRecommendPoint （自建推荐上车点采集上报）
> * point/obtainRecommendPoint （自建推荐上车点查询）

4、Swagger地址（可在线简单测试接口，暂未详细标示字段注释、必填属性等）： [https://weixintest.ruqimobility.com/manager/swagger-ui.html](https://weixintest.ruqimobility.com/manager/swagger-ui.html)

5、目前的APPKEY，同一个应用仅区分两个环境：dev、prod。对应客户端的开发、测试环境使用开发环境的key，正式环境使用正式环境的key。目前APPKEY值保存在数据库中。

### 详细介绍
1、上报接口详细说明
* POST请求
* 上报接口URL完整路径：https://weixintest.ruqimobility.com/manager/point/uploadRecommendPoint
* 参数示例：
```
{
      "channel": "string", // 推荐点渠道来源
      "selectLat": double, // 选择纬度
      "selectLng": double, // 选择经度
      "userLat": double, // 用户纬度
      "userLng": double, // 用户经度
      "cityCode": "string", // 城市编码
      "cityName": "string", // 城市名称
      "adCode": "string", // 行政区域编码
      "timeStamp": long, // 推荐上车点时间
      "recommendPoint":[
            {
                 "lat": double, // 纬度
                 "lng": "double", // 经度
                 "title": "string", // 短地址
                 "address": "string", // 长地址
                 "distance": double, // 距离
            }
       ]
}
```

* 返回值。目前返回
* 明文数据结构
```
`{
  "errorCode": 0,
  "errorMsg": ""
}`。未按照标准接口返回请求结果。业务侧异步调用接口上报数据后也不需关注接口请求结果。
```
* 密文数据结构
```
`{
  "encryptFlag": 1,//1代表data是密文，0代表data是明文
  "data":""
}`。
```

2、推荐上车点查询接口详细说明
* POST请求
* 查询接口URL完整路径：https://weixintest.ruqimobility.com/manager/point/obtainRecommendPoint
* 参数示例：
```
{
   "userLat": double, // 用户当前纬度
   "userLng": double, // 用户当前经度
   "selectLat": double, // 选择纬度
   "selectLng": double, // 选择经度
   "coordinateType": "string", // 坐标系
   "mapSdkType": "string", // 地图类型
}
```

* 返回值。目前返回
* 明文数据结构
```
`{
  "errorCode": 0,
  "errorMsg": "",
  "data":{
      "pointList":[
           {
              "lat": double, // 纬度
              "lng": double, // 经度
              "title": "string", // 短地址
              "address": "string", // 长地址
              "distance": double // 距离
           }    
      ]  
  }
}`。
```
* 密文数据结构
```
`{
  "encryptFlag": 1,//1代表data是密文，0代表data是明文
  "data":""
}`。
```

3、应用Key说明

**暂时只区分了开发和正式，开发和测试环境等非正式情况下统一使用开发key**

|ID（表内主键） | KEY | 说明|
|--- | --- | ---|
1 | 0EF521E49C6F4BB1 | 如祺司机端
2 | BB392D26CF521EFD | 如祺乘客端
3 | 8EAB14D70A290C24 | 如祺乘客端dev
4 | 6C32597ED4F181D1 | 如祺司机端dev
